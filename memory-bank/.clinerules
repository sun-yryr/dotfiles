# dotfilesプロジェクトのClinerules

このファイルは、dotfilesプロジェクトに関する重要なパターン、プロジェクト固有の知識、および作業方法を記録します。

## プロジェクトパターン

### ファイル命名規則

1. **ドットなしファイル名**
   - リポジトリ内のファイルはドットなしで保存します（例: `bashrc`）
   - インストール時にドット付きファイル名にシンボリックリンクされます（例: `~/.bashrc`）
   - 理由: 可視性の向上と一貫性の維持

2. **README駆動開発**
   - 各ディレクトリには専用のREADME.mdファイルを含めます
   - 各設定ファイルの目的と効果を文書化します
   - 理由: 透明性の確保と将来の参照のしやすさ

### 実装パターン

1. **モジュール式構造**
   - 設定は機能別のディレクトリに分割されます
   - 各モジュールは独立して機能し、必要に応じて選択的にインストールできます
   - 理由: 管理のしやすさと拡張性の向上

2. **シンボリックリンク管理**
   - 設定ファイルはシンボリックリンクを通じてホームディレクトリに接続されます
   - 既存のファイルはバックアップされます
   - 理由: リアルタイムの変更反映とバージョン管理の容易さ

3. **ローカルオーバーライド**
   - 各設定ファイルは`.local`サフィックスを持つファイルをチェックし、存在する場合はそれをインクルードします
   - これらのローカルファイルはGitで追跡されません
   - 理由: マシン固有の設定をリポジトリを変更せずに適用できる

## 作業フロー

### 新しい設定の追加

1. 適切なディレクトリを特定または作成します
2. ドットなしのファイル名で設定ファイルを追加します
3. ファイルの目的と効果を文書化します
4. インストールスクリプトを更新して新しいファイルを処理します
5. 変更をテストします
6. 変更をコミットします

### 設定の更新

1. リポジトリ内の対応するファイルを直接編集します
2. 変更をテストします
3. 変更をコミットします
4. 必要に応じて他のマシンで更新を同期します（`git pull && ./install.sh`）

### クロスプラットフォーム対応

1. プラットフォーム固有の設定を`os/`ディレクトリ内の適切なサブディレクトリに配置します
2. インストールスクリプトでプラットフォームを検出し、適切な設定を適用します
3. 可能な限り共通の設定を使用し、必要な場合のみプラットフォーム固有の設定を適用します

## プロジェクト固有の知識

### 重要な実装パス

1. **インストールプロセス**:
   - `install.sh`がメインのエントリーポイントです
   - プラットフォームを検出し、適切な設定を適用します
   - 既存のファイルをバックアップし、シンボリックリンクを作成します

2. **設定の読み込み順序**:
   - シェル設定ファイル（`.bashrc`、`.zshrc`など）が最初に読み込まれます
   - これらのファイルが他の設定ファイルをインクルードします
   - ローカルオーバーライドが最後に読み込まれます

### 既知の課題と回避策

1. **シンボリックリンクの互換性**:
   - 一部のアプリケーションはシンボリックリンクを適切に処理しない場合があります
   - 回避策: 必要に応じて特定のファイルにコピー方式を適用します

2. **クロスプラットフォームの互換性**:
   - 異なるOSでは設定ファイルの場所や形式が異なる場合があります
   - 回避策: プラットフォーム検出と条件付き設定を使用します

## 学習と進化

このセクションは、プロジェクトの進行に伴って発見される新しいパターンや学習内容を記録するために使用されます。

### 発見されたパターン

（プロジェクトの進行に伴って更新されます）

### 改善の機会

（プロジェクトの進行に伴って更新されます）
